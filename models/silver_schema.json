{
	"$schema":"http://json-schema.org/draft-07/schema",
	"title":"Silver Clickstream Event"
	"type":"object",
	"additionalProperties":false,
	"properties":{
		"event_id":{
			"description":"Deterministic ID for idempotency (hash of user_id|session_id|timestamp|page_url).",
			"type":"string",
			"pattern":"^[0-9a-fA-F-]{36}$",
		},
		"schema_version":{
			"description": "Schema version of evolution",
			"type":"integer",
			"const":1,
		},
		
		"user_id": {
			"type":"string",
			"minLength": 1 },
			
		"session_id": {
			"type": "string",
			"minLength": 1
		},
			
		"timestamp": {
			"description": "UTC ISO-8601, e.g. 2025-08-29T12:34:56Z",
			"type": "string",
			"format": "date-time",
			"pattern": "Z$"
		},
		
		"event_date": {
			"description": "Partition key dervived from timestamp (UTC date).",
			"type": "string",
			"pattern":"^[0-9]{4}-[0-9]{2}-[0-9]{2}$"
		},
		
		"page_url": {
			"type": "string",
			"minLength": 1,
		},
		
		"page_type": {
			"type": "string",
			"enum": ["home", "product", "search", "cart", "checkout", "page"]
		},
		
		"referrer": {
			"type": "string"
		},
		
		"ref_domain": {
			"type":"string"
		},
		
		"ip": {
			"type": "string",
			"anyOf": [
				{"format": "ipv4"},
				{"format": "ipv6"},
				{"pattern":"^$"}
			]
		}
    },
	
	"required": [
		"event_id",
		"schema_version",
		"user_id",
		"session_id",
		"timestamp",
		"event_date",
		"page_url",
		"page_type",
		"ref_domain"
  ]
}
		
		